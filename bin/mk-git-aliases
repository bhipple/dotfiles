#!/usr/bin/env bash
set -euxo pipefail

tmp=/tmp/git_aliases.zsh
tgt=$HOME/dotfiles/zsh/git_aliases.zsh

rm -f $tmp

for c in $(git --help -a | grep '^   [a-z]' | grep -v grep | awk '{print $1}'); do
    echo "alias g$c=\"git $c\"" | tee -a $tmp
done

git la | grep -Ev '^g' | cut -d'=' -f1 | grep -v '-' | xargs -I{} echo 'alias g{}="git {}"' | tee -a $tmp

echo 'alias gg="git grep"' | tee -a $tmp
echo 'alias ggi="git grep -i"' | tee -a $tmp
echo 'alias ggw="git grep -w"' | tee -a $tmp
echo 'alias ggwi="git grep -wi"' | tee -a $tmp
echo 'alias ggiw="git grep -iw"' | tee -a $tmp

echo 'alias gprs="git prs"' | tee -a $tmp
echo 'alias grf="git rf"' | tee -a $tmp

echo "# Generated by ../bin/mk-git-aliases; do not edit" > $tgt
cat $tmp | sort -u | tee -a $tgt
